'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _koaRouter=require('koa-router');var _koaRouter2=_interopRequireDefault(_koaRouter);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);var _nodeFetch=require('node-fetch');var _nodeFetch2=_interopRequireDefault(_nodeFetch);var _querystring=require('querystring');var _querystring2=_interopRequireDefault(_querystring);var _boom=require('boom');var _boom2=_interopRequireDefault(_boom);var _koaConvert=require('koa-convert');var _koaConvert2=_interopRequireDefault(_koaConvert);var _koaReqValidator=require('koa-req-validator');var _koaReqValidator2=_interopRequireDefault(_koaReqValidator);var _users=require('../../models/users');var _users2=_interopRequireDefault(_users);var _auth=require('../../utils/auth');var _mixed=require('../../utils/mixed');var _config=require('../../config');var _config2=_interopRequireDefault(_config);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step('next',value)},function(err){step('throw',err)})}}return step('next')})}}var validate=function validate(){return(0,_koaConvert2.default)(_koaReqValidator2.default.apply(undefined,arguments))};var router=new _koaRouter2.default({prefix:'/v1/auth/twitter'});router.post('/',validate({'code:body':['require','code is required']}),function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(ctx,next){var code,_Config$auth$twitter,accessTokenUrl,client_id,redirect_uri,client_secret;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:try{code=ctx.request.body.code;_Config$auth$twitter=_config2.default.auth.twitter,accessTokenUrl=_Config$auth$twitter.accessTokenUrl,client_id=_Config$auth$twitter.client_id,redirect_uri=_Config$auth$twitter.redirect_uri,client_secret=_Config$auth$twitter.client_secret;// WIP
}catch(err){if(err.output.statusCode){ctx.throw(err.output.statusCode,err)}else{ctx.throw(500,err)}}case 1:case'end':return _context.stop();}}},_callee,undefined)}));return function(_x,_x2){return _ref.apply(this,arguments)}}());exports.default=router;